/* ==========
   БАЗА
========== */
.portfolio{
  background: var(--beige);
}

.portfolio__container{
  position: relative;
}

/* плавный скролл по странице в целом */
html:focus-within{ scroll-behavior:smooth; }

/* ==========
   ХЕДЕР
========== */
.portfolio__header{
  display:flex; flex-direction:column;
  align-items:center; justify-content:center;
  text-align:center; margin-bottom:30px;
}

.portfolio__title{
  font-size: var(--h2);
  margin: 0 0 12px 0;
  border-bottom: 2px solid var(--forest);
  border-image: linear-gradient(90deg,#7ED957,#0E9F49) 1;
  width: fit-content; text-align:center;
}

.portfolio__sub{
  color: var(--olive);
  max-width: 720px; margin: 0 auto;
  line-height: 1.6; text-align:center;
}

/* ==========
   КНОПКИ (VIEW MORE / LOAD MORE)
========== */
.see-all-container{
  display:flex; justify-content:center; margin-top:14px;
}
.see-all-btn{
  display:inline-block;
  background:var(--gold); color:var(--ivory);
  padding:9px 32px; border-radius:8px;
  font-weight:600; text-decoration:none;
  transition: transform .2s ease, background .25s ease, color .25s ease;
  border:none; cursor:pointer;
}
.see-all-btn:hover{ background:var(--ivory); color:var(--forest); transform: translateY(-1px); }
.see-all-btn:active{ transform: translateY(0); }

/* ==========
   СТРЕЛКИ ВИТРИНЫ
========== */
.portfolio__arrow{
  position:absolute; top:56%;
  transform: translateY(-50%);
  z-index:5; width:56px; height:56px;
  border-radius:50%; border:none; cursor:pointer;
  background:#3e4c3a40; color:var(--gold);
  display:flex; align-items:center; justify-content:center;
  backdrop-filter: blur(4px);
  transition: background .25s ease, color .25s ease, transform .15s ease, opacity .25s ease;
  will-change: transform, opacity;
  outline: none;
}
.portfolio__arrow:hover{
  background: var(--gold); color: var(--forest);
  transform: translateY(-50%) scale(1.05);
}
.portfolio__arrow:active{ transform: translateY(-50%) scale(1.01); }
.portfolio__arrow:focus-visible{ box-shadow: 0 0 0 2px var(--gold); }
.portfolio__arrow--left{ left:16px; }
.portfolio__arrow--right{ right:16px; }

/* на узких — меньше; на совсем узких скрываем (как было) */
@media (max-width: 768px){
  .portfolio__arrow{ width:44px; height:44px; }
}
@media (max-width: 480px){
  .portfolio__arrow{ display:none; }
}

/* ==========
   СЕТКА
========== */
.portfolio__grid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(360px,1fr));
  gap:24px;
  align-items: stretch;
}

/* нижняя часть после раскрытия */
.portfolio__grid--expanded{ margin-top:20px; }

/* ==========
   КАРТОЧКА
========== */
.pCard{
  position:relative;
  overflow:hidden;
  border-radius:16px;
  box-shadow: 0 10px 24px #0000001a;
  /* без изменений layout при смене кадра */
  contain: paint;
}

/* фиксируем высоту карточки — никаких «скачков» */
.pCard__imageWrap{
  position:relative; width:100%;
  aspect-ratio: 4 / 3; overflow:hidden;
}

/* слой с картинкой — только кросс-фейд + мягкий зум; без translateY */
.pCard__imageStage{
  position:absolute; inset:0;
  opacity:0;
  transition: opacity .6s ease, transform .6s ease;
  will-change: opacity, transform;
  transform: scale(1.02); /* лёгкий зум для плавности */
  pointer-events: none;
}
.pCard__imageStage.is-active{
  opacity:1;
  transform: scale(1);   /* плавно «приезжает» */
  pointer-events: auto;
}

.pCard__image{
  width:100%; height:100%;
  object-fit:cover; display:block;
  /* убираем резкие ховеры, чтобы не дрожало */
  transition: transform .8s ease;
}
.pCard:hover .pCard__image{ transform: scale(1.03); }

/* затемнение снизу */
.pCard__overlay{
  position:absolute; inset:0;
  background: linear-gradient(to top, #3e4c3ae6, #3e4c3a66, transparent);
}

/* текст */
.pCard__text{
  position:absolute; left:0; right:0; bottom:0;
  padding:24px; color:var(--ivory); z-index:2;
}
.pCard__cat{ color:var(--gold); margin:0 0 4px; }
.pCard__title{ font-family:'Playfair Display',serif; font-size:24px; margin:0; }

/* ==========
   КНОПКИ-ПОЛОСКИ (слева сверху)
========== */
.pCard__bars{
  position:absolute; top:12px; left:24px;
  display:flex; gap:6px; z-index:3;
}
.pCard__bar{
  width:18px; height:4px; border-radius:999px;
  background:#ffffff4d; border:none; cursor:pointer;
  transition: width .25s ease, background .25s ease, transform .15s ease;
  outline:none;
}
.pCard__bar:hover{ transform: translateY(-1px); }
.pCard__bar.is-active{ width:28px; background: var(--gold); }
.pCard__bar:focus-visible{ box-shadow: 0 0 0 2px var(--gold); }

/* ==========
   ТОЧКИ/ДОП. НАВИГАЦИЯ (если используешь)
========== */
.portfolio__dots{
  display:flex; justify-content:center; gap:8px; margin-top:32px;
}
.portfolio__dot{
  width:8px; height:8px; border-radius:999px;
  background:#6c6a5a4d; border:none; cursor:pointer;
  transition:.3s;
}
.portfolio__dot.is-active{ width:32px; background: var(--gold); }

/* ==========
   SKELETON
========== */
.skeleton{
  background: linear-gradient(90deg,#eae7de 25%,#f3f1eb 37%,#eae7de 63%);
  background-size: 400% 100%;
  animation: shimmer 1.2s ease-in-out infinite;
  border-radius:16px; aspect-ratio:4/3;
}
@keyframes shimmer{
  0%{ background-position:100% 0; }
  100%{ background-position:0 0; }
}

/* ==========
   МЯГКАЯ ПОЯВЛЕНИЕ НИЖНИХ КАРТОЧЕК
========== */
@keyframes plFadeUp{
  from { opacity:0; transform: translateY(8px) scale(0.995); }
  to   { opacity:1; transform: translateY(0)   scale(1); }
}
.pl-appear{ animation: plFadeUp 380ms cubic-bezier(.22,.61,.36,1) forwards; }

/* ==========
   REDUCED MOTION
========== */
@media (prefers-reduced-motion: reduce){
  .pCard__imageStage,
  .pCard__image,
  .portfolio__arrow,
  .pl-appear{
    transition: none !important;
    animation: none !important;
  }
}
/* фиксируем высоту карточки */
.pCard__imageWrap{
  position:relative; width:100%;
  aspect-ratio: 4 / 3;   /* ← высота стабильна */
  overflow:hidden;
}

/* только opacity + лёгкий scale, НИКАКОГО translateY */
.pCard__imageStage{
  position:absolute; inset:0;
  opacity:0;
  transition: opacity .6s ease, transform .6s ease;
  will-change: opacity, transform;
  transform: scale(1.02);
}
.pCard__imageStage.is-active{
  opacity:1;
  transform: scale(1);
}

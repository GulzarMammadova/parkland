import{u as U,r as v,R as t,m as N,s as j}from"./index-DrUG7fk5.js";const k="projects",b="team",Z=/\.(jpe?g|png|webp|avif|gif)$/i,B=(a="")=>Z.test(a);function T(a){return j.storage.from(k).getPublicUrl(a).data.publicUrl}async function M(a){const c=T(a),n=await fetch(c,{cache:"no-store"});if(!n.ok)throw new Error(`Failed to fetch ${a}: ${n.status}`);return n.json()}function A(a=""){return a.replace(/[-_]+/g," ").replace(/\s+/g," ").trim().split(" ").map(n=>n?n[0].toUpperCase()+n.slice(1):"").join(" ")}function S(a=""){const c=a.replace(/\.[^.]+$/,""),[n,g]=c.split("--"),m=(n||"").toLowerCase(),E=A(m),f=g?A(g):"";return{slug:m,nameEn:E,roleEn:f}}const z={hidden:{},visible:{transition:{staggerChildren:.08,delayChildren:.05}}},L={hidden:{opacity:0,x:-50,scale:.94},visible:{opacity:1,x:0,scale:1,transition:{duration:.75,ease:[.19,1,.22,1]}}};function G(){const{lang:a}=U(),[c,n]=v.useState([]),[g,m]=v.useState(!0);v.useEffect(()=>{let e=!0;async function r(){try{m(!0);let s={members:{}};try{s=await M(`${b}/team.json`)}catch(o){console.warn("No team.json or failed to load:",o?.message)}const{data:u,error:i}=await j.storage.from(k).list(b,{limit:1e3,sortBy:{column:"name",order:"asc"}});if(i)throw i;const p=(u||[]).filter(o=>o.metadata&&B(o.name));p.sort((o,_)=>o.name.localeCompare(_.name));const y=[],w=new Set;for(const o of p){const _=`${b}/${o.name}`,x=T(_),l=S(o.name);if(!l.slug||w.has(l.slug))continue;w.add(l.slug);const h=s.members?.[l.slug]||{},F=h.name?.az||l.nameEn,P=h.name?.en||l.nameEn,I=h.role?.az||l.roleEn,R=h.role?.en||l.roleEn;y.push({id:_,slug:l.slug,nameEn:P,nameAz:F,roleEn:R,roleAz:I,photo:x})}e&&n(y)}catch(s){console.error("Team load error:",s),e&&n([])}finally{e&&m(!1)}}return r(),()=>{e=!1}},[]);const E={EN:{title:"Our Team"},AZ:{title:"Komandamız"}},f=E[a]||E.EN,d=c.filter(e=>(e.roleEn||"").toLowerCase().includes("founder")||(e.roleAz||"").toLowerCase().includes("təsisçi")),C=c.filter(e=>!d.includes(e)),$="team__grid team__grid--founders"+(d.length===1?" team__grid--founders--single":"");return t.createElement("section",{id:"team",className:"team section"},t.createElement("div",{className:"container team__container"},t.createElement("div",{className:"team__header"},t.createElement("h2",{className:"team__title"},f.title),t.createElement("p",{className:"team__sub"},f.sub)),g?t.createElement("div",{className:"team__grid"},Array.from({length:6}).map((e,r)=>t.createElement("div",{className:"tCard",key:r},t.createElement("div",{className:"team__fallback"},"PL"),t.createElement("p",{className:"tCard__name",style:{opacity:.5}},"Loading…")))):t.createElement(t.Fragment,null,d.length>0&&t.createElement(N.div,{className:$,variants:z,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.3}},d.map((e,r)=>{const s=a==="AZ"&&e.nameAz||e.nameEn,u=a==="AZ"&&e.roleAz||e.roleEn,i=s&&s.split(" ").filter(Boolean).map(p=>p[0]).join("").slice(0,3);return t.createElement(N.article,{className:"tCard tCard--founder",key:e.id,variants:L},t.createElement("div",{className:"tCard__photo"},e.photo?t.createElement("img",{className:"tCard__img",src:e.photo,alt:s,loading:r<2?"eager":"lazy",decoding:"async"}):t.createElement("div",{className:"team__fallback"},i||"PL")),t.createElement("h3",{className:"tCard__name"},s),t.createElement("p",{className:"tCard__role tCard__role--gold"},u))})),C.length>0&&t.createElement(N.div,{className:"team__grid",variants:z,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.3}},C.map(e=>{const r=a==="AZ"&&e.nameAz||e.nameEn,s=a==="AZ"&&e.roleAz||e.roleEn,u=r&&r.split(" ").filter(Boolean).map(i=>i[0]).join("").slice(0,3);return t.createElement(N.article,{className:"tCard",key:e.id,variants:L},t.createElement("div",{className:"tCard__photo"},e.photo?t.createElement("img",{className:"tCard__img",src:e.photo,alt:r,loading:"lazy",decoding:"async"}):t.createElement("div",{className:"team__fallback"},u||"PL")),t.createElement("h3",{className:"tCard__name"},r),t.createElement("p",{className:"tCard__role"},s))})),!C.length&&!d.length&&t.createElement("p",{style:{textAlign:"center",marginTop:24}},"Team will appear here soon."))))}export{G as Team,G as default};
